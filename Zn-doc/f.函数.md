# 函数

## 1. 函数表

- 运算符函数

| 符号    | 作用    | 示例            | 返回值          | en    | uni |     |
| ----- | ----- | ------------- | ------------ | ----- | --- | --- |
| =     | 赋值    | a=1           | 目标值          | eq    |     | 1   |
| +     | 相加    | 1+1           | 计算值          |       |     | 1   |
| -     | 相减    | 1-1           | 计算值          |       |     | 1   |
| *     | 相乘    | 1*1           | 计算值          |       |     | 1   |
| /     | 相除    | 1/1           | 计算值          |       |     | 1   |
| %     | 整除取余  | 1%1           | 计算值          |       |     | 1   |
| ^     | 指数幂   | 1^1           | 计算值          |       |     | 1   |
| ++    | 自增+1  | c++           | 计算值          | spp   |     |     |
| --    | 自减-1  | i--           | 计算值          | sss   |     |     |
| :     | 操作    | obj:fuck()    | 操作函数返回值      | op    |     | 1   |
| .     | 索引    | map.a         | 索引得到值        | pin   |     | 1   |
| []    | 索引    | map["ss"]     | 索引得到值        | index |     | 1   |
| ??    | 条件判断  | {}??(1)       | 目标函数         |       |     | 1   |
| ?     | 三目表达式 | "love"?1:"no" | 目标值          |       |     | 1   |
| ?=    | 相等    | 1?=1          | 判断值          |       |     | 1   |
| !=    | 不相等   | 1!=1          | 判断值          |       |     | 1   |
| ?>    | 大于    | 1?>1          | 判断值          |       |     | 1   |
| ?<    | 小于    | 1?<1          | 判断值          |       |     | 1   |
| >=    | 大于或等于 | 1>=1          | 判断值          |       |     |     |
| <=    | 小于或等于 | 1<=1          | 判断值          |       |     |     |
| ~     | 逻辑非   | ~1            | 计算值          |       |     |     |
| &     | 逻辑与   | 1&1           | 计算值          |       |     |     |
| \|    | 逻辑或   | 1\|1          | 计算值          |       |     |     |
| <<    | 注册预返回 | << a          | 无            |       |     |     |
| <-    | 左射    | a<-b          | 计算值          |       |     |     |
| ->    | 右射    | a->b          | 计算值          |       |     |     |
| <->   | 交换值   | a<->b         | 交换后序列向量      |       |     |     |
| #     | 计算长度  | # list        | 计算值          |       |     |     |
| loop  | 定次循环  | {}loop(5)     | 输出值构成的向量     |       |     |     |
| while | 条件循环  | {}while{}     | 最后一次循环的函数返回值 |       |     |     |
| for   | 遍历循环  | {}for([])     | 输出值构成的向回值    |       |     |     |


- 其他函数详见：扩展函数

## 2. 函数域

如上文，每个`函数域`内允许`栽种值列`。

```
// 使用 f(x)=x 形式定义函数
HaveBreakfast() = 1

// 先创建匿名函数再转移值
HaveLunch = (){2}              // 返回 2

// 无参数变体写法
HaveDinner = {3}               // 返回 3

eat = (){
	HaveBreakfast()
	HaveLunch()
	HaveDinner()
}


```

1. `root`函数域的栽种值列有`HaveBreakfast`，`HaveLunch`，`HaveDinner`，`eat`
2. `eat`函数域的栽种值列有`1`，`2`，`3`

## 3.  函数调用

```
// 1. = 赋值函数  
a=1 a="" a=<> a={} // 除函数以外类型  
a=(){} a()=0 a=[] // 定义有名函数

// 2. 一般函数，假设 f 是函数
f()  {}()  (){}() // 前缀调用  
  
{}f{} {}f() {}f<> {}f"" {}f[] // 中缀调用  
()f{} ()f() ()f<> ()f"" ()f[]
<>f{} <>f() <>f<> <>f"" <>f[]
""f{} ""f() ""f<> ""f"" ""f[]
[]f{} []f() []f<> []f"" []f[]

// 注：loop while for 就属于“中缀调用”
// 因此我们没有任何关键字

// 3. 运算符函数 
1 + 1 - 3 * 4 / 5 ^ 6 ?= 5 % 2 != 5 ?< 8 ?> 7 <= 4 >= 3   
(-1)  
()?() {}?() ""?() <>?() []?()  
{}??():{}

// 4. 访问和操作函数
<>.a  <>[1]  <>:a
<>.a() a.a a[1]  a:a
a.a=1  a[1]=1
```


## 4. 函数返回

每一个函数必定拥有返回值：
1. 对于空函数：返回值是`null`
2. 对于非空函数：
	1. 没有`返回声明`：返回值是`最后一个个栽种值`
	2. 有`返回声明`：
		1. `返回变量标签`未定义：等待，直到标签定义
		2. `返回变量标签`已定义：立刻返回


我们可以用`<<`定义`预返回`，以实现`在任何子流程return 且 中止函数`的目的。

这里用阶乘函数做演示：

```Zn
Factorial = (x){
	<< r        // 定义预返回
	{r = 1}??(x <= 1)
	r = x * Factorial(x-1)
}
```

预返回`<<`是一个占位符，占领`栽种值列`的第一个位置。这种情况下函数不会返回，直到`预返回标签`（这里的`r`）被定义值。

如果你想不使用预返回，也可以这样写：
```Zn
F = (x){
	({1}??(x <= 1):{x * F(x-1)})()
}
```
甚至：
```Zn
F(x) = ({1}??(x <= 1):{x * F(x-1)})()
```
或：
```Zn
F(x)=1?(x<=1):x*F(x-1)
```

基于以上
```
1
1?1
{1}()
{<<1}()
(x){x}(1)
{1}??(1)()
{<<r r=1}()
(i){i}loop(1)
(x){<<r r=x}(1)



```
他们均相同

